
<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-GB">
<head>
	<title>Demo</title>
	<meta http-equiv="Content-Type" content="application/xhtml+xml; charset=utf-8" />
	<meta name="description" content="How to keep footers at the bottom of the page (CSS demo)" />
	<meta name="keywords" content="How to keep footers at the bottom of the page (CSS demo)" />
	<meta name="robots" content="index, follow" />
	<style media="screen" type="text/css">
	html,
	body {
		margin:0;
		padding:0;
		height:100%;
	}
	#container {
		min-height:100%;
		position:relative;
	}
	#header {
		background:#ff0;
		/*padding:10px;*/
	}
	#body {
		/* padding:10px; */
		/*padding-bottom:60px;*/	/* Height of the footer */
	}
	#footer {
		position:absolute;
		bottom:0;
		width:100%;
		height:60px;			/* Height of the footer */
		background:#6cf;
	}
	/* other non-essential CSS */
	#header p,
	#header h1 {
		margin:0;
		padding:10px 0 0 10px;
	}
	#footer p {
		margin:0;
		/*padding:10px; */
	}
	</style>
	<!--[if lt IE 7]>
	<style media="screen" type="text/css">
	#container {
		height:100%;
	}
	</style>
	<![endif]-->
</head>
<body>

<div id="container">
	<div id="header">
		<!-- Header start -->
		<h1>Demo</h1>
		<!-- Header end -->
	</div>
	<div id="body">
		<!-- Body start -->
        <div id="map_container"></div>
		<!-- Body end -->
	</div>
	<div id="footer">
		<!-- Footer start -->
		<p><strong>Footer</strong></p>
		<!-- Footer end -->
	</div>
</div>

<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script src="http://maps.googleapis.com/maps/api/js?sensor=false" type="text/javascript"></script>

<script type="text/javascript">
    var map;

    //dynamically resize the map
    function resizeMap() {

      // calculate new size and apply it
      var header = document.getElementById('header');
      var mid = document.getElementById('map_container');
      var foot = document.getElementById('footer');

      mid.style.height = $.getDocHeight() - (header.offsetHeight + foot.offsetHeight) +'px';

      // trigger a resize event on the map so it reflects the new size
      if(map != null) {
        google.maps.event.trigger(map, 'resize');
      }
    }

    $.getDocHeight = function(){
        console.log('Height: ' + $(window).height() + 'opera: ' + document.documentElement.clientHeight)
        return Math.max(
            $(window).height(),
            /* For opera: */
            document.documentElement.clientHeight
        );
    };

    //populate the page
    $(document).ready(function() {

      //resize the map container
      resizeMap();

      // bind resize map function to the resize event for the window
      var resizeTimer = null;
      $(window).resize(function() {
          if (resizeTimer) clearTimeout(resizeTimer);
            resizeTimer = setTimeout(resizeMap, 100);
      });

      // continue with the initialisation of the map
      var myOptions = {
            zoom:12,
            mapTypeId:google.maps.MapTypeId.ROADMAP,
            panControl:false,
            scaleControl:false,
            zoomControlOptions:{
                style:google.maps.ZoomControlStyle.LARGE,
                position:google.maps.ControlPosition.RIGHT_TOP
            },
            center: new google.maps.LatLng(47.6062, -122.33),
            streetViewControl:false,
            mapTypeControl:true,
            mapTypeControlOptions:{
                style:google.maps.MapTypeControlStyle.DROPDOWN_MENU
            }
        };
        map = new google.maps.Map(document.getElementById("map_container"), myOptions);

    });
</script>

</body>
</html>
